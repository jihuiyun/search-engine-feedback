# 搜索引擎不良信息处理

请使用 Python 语言和浏览器交互实现搜索引擎不良信息处理，可能会用到 Selenium 等相关的工具。

大致流程是使用浏览器打开搜索引擎，输入关键词，获取搜索结果，然后对搜索结果中的过期条目提交反馈给搜索引擎，最后每条搜索结果反馈完毕后，点击「下一页」，重复上述操作，直到所有关键词反馈完毕。另外，每条搜索结果处理结果都需要按照「关键词-搜索结果-链接-处理时间-搜索引擎-是否过期」保存到 Sqlite 数据库中。

# 编码要求：
- 代码中止后要求保存当前进度，下次启动时从上次进度开始继续处理。
- 搜索关进词、搜索引擎地址等信息做好抽象，或者抽离成配置项，
- 代码结构清晰，
- 代码可读性好，
- 代码可维护性好，
- 代码可扩展性好。

# 搜索关键词如下：

91y金币回收银商上下分微信
91y游戏金币找谁交易
91y游戏金币找谁交易

# 如何判断搜索结果过期

满足以下任意条件即为过期信息：

- 结果页面是 404 页面
- 页面内容包含：
  - 哎呀~页面找不到啦!
  - 回到首页
  - 返回首页
  - 您访问的页面不见了！
  - 很抱歉，内容走丢了
  - 知道宝贝找不到问题了>_<!!
  - 该问题可能已经失效。
  - 返回首页 x秒以后自动返回
  - 404 Not Found nginx
- 页面在 5 秒内重定向到对应站点的首页

# 搜索引擎反馈方式
不同的搜索引擎反馈方式不一样：

## 头条搜索

- 打开搜索引擎，网址：https://www.toutiao.com/；
- 输入关键词搜索；
- 依次点击每个搜索结果，判断是否过期信息，如果过期则点击条目后的「...」开始反馈
- 反馈：
    - 反馈类型选择「页面打不开，无法找到网页」
    - 详细描述填写：「网页打不开，提示内容已删除或找不到该网页，请删除快照，且快照包含91y关键词信息为不实内容，误导91y游戏用户，已严重影响到浮云公司的商誉和正常的经营秩序」
    - 联系方式填写：huiyun@fuyuncn.com
    - 点击确定
- 一页搜索结果反馈完毕后，点击「下一页」，重复上述操作，直到反馈完毕。
- 最后一页反馈完毕后，换下一个关键词，重复上述操作，直到所有关键词反馈完毕。

## 必应

- 打开搜索引擎，网址：https://cn.bing.com/；
- 输入关键词搜索；
- 依次点击每个搜索结果，判断是否过期信息，如果过期则将搜索结果的链接复制到反馈站点 https://www.bing.com/webmasters/tools/contentremoval 网页快照地址中；
- 打开反馈站点 https://www.bing.com/webmasters/tools/contentremoval
    - 输入内容 URL
    - 删除类型选择「删除页面」
    - 点击「提交」。
- 一页搜索结果反馈完毕后，点击「下一页」，重复上述操作，直到反馈完毕。
- 最后一页反馈完毕后，换下一个关键词，重复上述操作，直到所有关键词反馈完毕。

## 百度

- 打开搜索引擎，网址：https://www.baidu.com/；
- 输入关键词搜索；
- 依次点击每个搜索结果，判断是否过期信息，如果是则点击搜索结果页底部的「用户反馈」；
- 根据提示选择过期搜索条目，选择一个反馈条目，描述信息填写：「网页打不开，提示内容已删除或找不到该网页，请删除快照，且快照包含91y关键词信息为不实内容，误导91y游戏用户，已严重影响到浮云公司的商誉和正常的经营秩序」。邮箱填写：huiyun@fuyuncn.com，再点击「提交反馈」；
- 点击「提交反馈」后，会弹出验证图片，人工验证即可通过。
- 一页搜索结果反馈完毕后，点击「下一页」，重复上述操作，直到反馈完毕。
- 最后一页反馈完毕后，换下一个关键词，重复上述操作，直到所有关键词反馈完毕。


## 360

- 打开搜索引擎，网址：https://www.so.com/；
- 输入关键词搜索；
- 依次点击每个搜索结果，判断是否过期信息，如果过期则将搜索结果的链接复制到反馈站点 https://info.so.com/cache_remove.html 网页快照地址中；
- 打开反馈站点 https://info.so.com/cache_remove.html
    - 问题类型选择「删除快照」
    - 网页快照地址
    - 描述信息填写：「网页打不开，提示内容已删除或找不到该网页，请删除快照，且快照包含91y关键词信息为不实内容，误导91y游戏用户，已严重影响到浮云公司的商誉和正常的经营秩序」
    - 邮箱填写：huiyun@fuyuncn.com
    - 验证码需要人工识别
    - 验证码通过验证后点击「提交」。
- 一页搜索结果反馈完毕后，点击「下一页」，重复上述操作，直到反馈完毕。
- 最后一页反馈完毕后，换下一个关键词，重复上述操作，直到所有关键词反馈完毕。


注意：由于不同搜索引擎的反馈方式不一样，且部分过程需要人工介入（登录等……），所以整体逻辑都是串行调用，不进行多线程处理。

## ChromeDriver 配置

本程序优先使用本地 ChromeDriver。您可以：

1. 将 chromedriver 放在以下任一位置：
   - 项目根目录 (`./chromedriver`)
   - drivers 子目录 (`./drivers/chromedriver`)
   - 系统路径 (`/usr/local/bin/chromedriver`)

2. 确保 ChromeDriver 版本与您的 Chrome 浏览器版本匹配

3. 如果您使用的是 M1/M2 Mac，请下载 mac-arm64 版本的 ChromeDriver

如果找不到本地 ChromeDriver 或版本不匹配，程序会自动下载合适的版本。

### 手动下载 ChromeDriver

1. 查看 Chrome 版本：
   - 打开 Chrome
   - 点击右上角三个点
   - 帮助 -> 关于 Google Chrome

2. 下载对应版本的 ChromeDriver：
   - 访问 https://chromedriver.chromium.org/downloads
   - 选择与 Chrome 版本匹配的 ChromeDriver
   - Mac M1/M2 用户选择 mac-arm64 版本
   - 其他系统选择对应版本

3. 解压并将 chromedriver 放在上述任一位置


# 流程

简化流程：

1. 检查任务是否完成
1. 确保登录状态
1. 搜索和获取结果
1. 检查链接是否过期
1. 保存结果和提交反馈
1. 翻页直到所有结果处理完成

详细：

1. 加载浏览器环境；
2. 依次处理四种搜索引擎（百度、必应、360 和头条搜索）下的关键字词条（keywords），这里要求所有关键字词条（keywords）处理完再继续下一个搜索引擎；
3. 百度和必应搜索引擎打开后先写入本地对应的 cookies 文件使之登录（方便后续反馈），如果 cookie 写入后没有登录说明 cookie 过期，此时等待用户手动登录，360 和头条搜索不需要登录，对应的登录逻辑写个空方法即可，需要会注意的是必应搜索一个账户一天内只能反馈最多 10 条，再多只能换账号；
4. 关键字词条（keywords）搜索前先在 progress 表中查看在当前搜索引擎下是否已经结束（is_done = 1），如果是则跳过；
5. 搜索后依次处理每个搜索结果，先拿到搜索结果词条的 url 在 results 表中查看对应 url 是否能找到，如果能则跳过过期判断，否则做过期判断，一个词条结束后在 results 表中保存当前处理结果，需要注意的是保存需要做去重处理（即 keyword+search_engine+url 相同则认为是重复的）；
6. 提交反馈，4 种搜索引擎的反馈流程不尽相同，都需要特化处理；
7. 当前页结果全部处理完则下一页直至到最后一页最后一条处理完成则标志着当前关键字词条在当前搜索引擎下处理完成（is_done=1）,写入 progress 表记录后继续一个词条；8. 所有词条处理完则下一个搜索引擎以此类推。

# 账号

- 必应：huiyun@fuyuncn.com fuyuncn.123
- 百度：1355526214@qq.com jihuiyun.123

# 百度旋转验证码实现资料
1. 【CSDN x】https://blog.csdn.net/wh00011/article/details/140658471
2. 【GitHub x】https://github.com/wangh00/aqc_spin_v2
3. 【旋转模型✅】https://github.com/HarderThenHarder/rotate_image_classifier
4. 【思路-另外一种语言 -> python】https://www.zhihu.com/zvideo/1512197159978483712
5. 【模型实现原理】https://github.com/d4nst/RotNet
6. 【卷积神经网络实现】https://d4nst.github.io/2017/01/12/image-orientation/

安装依赖：pip3 install -i https://pypi.tuna.tsinghua.edu.cn/simple -r requirements.txt